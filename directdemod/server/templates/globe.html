<!DOCTYPE HTML>
<html>
  <head>

    <!-- WebGLEarth -->
    <script src="{{ url_for('static', filename='scripts/api.js') }}"></script>

            <!-- JQuery -->
    <script src="https://code.jquery.com/jquery-3.4.1.min.js"
            integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo="
            crossorigin="anonymous">
    </script>

    <script src="https://code.jquery.com/ui/1.12.0/jquery-ui.min.js"
            integrity="sha256-eGE6blurk5sHj+rmkfsGYeKyZx3M4bG+ZlFyA7Kns7E="
            crossorigin="anonymous">
    </script>

    <link rel="stylesheet" href="//code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">

    <!-- CSS -->
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">

    <script>
      function initialize() {
        var earth = new WE.map('earth_div');
        var osm = WE.tileLayer('http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png').addTo(earth);
        var layer = WE.tileLayer('tms/{z}/{x}/{y}.png', {
            tms: true,
            opacity: 0.7
        }).addTo(earth);

        var layers = [layer];
        var current = layers[0];

        function refreshTime(event, ui) {
            var value = ui.value - 1;
            if (value >= 0 && value < layers.length) {
                if (layers[value] === current) {
                   return;
                } else {
                   current.removeFrom(earth)
                   current = layers[value];
                   current.addTo(earth)
                }
            }
        }

        $("#slider-time").slider({
            orientation: "horizontal",
            range: "min",
            max: layers.length,
            min: 1,
            step: 1,
            value: 1,
            slide: refreshTime,
            change: refreshTime
        });
      }
    </script>
  </head>
  <body onload="initialize()">
    <div id="slider-time"></div>
    <div id="earth_div"></div>
  </body>
</html>
